# CUSTOM
TZ=Asia/Shanghai

# Tailscale Docker 镜像环境变量整理 (参考官方文档 https://tailscale.com/kb/1282/docker)
# 镜像版本建议：:latest 或 :stable 或指定版本如 :v1.58.2
#               不稳定版可用 :unstable 或 :unstable-v1.59.x 等

# ─────────────── 认证相关 ───────────────

# 是否接受管理控制台推送的 DNS 配置
# 默认不接受
TS_ACCEPT_DNS=false

# 是否只在未登录时尝试登录一次
# 默认 false（容器每次启动都强制重新认证）
TS_AUTH_ONCE=false

# Tailscale 认证密钥（最常用方式）
# 格式如 tskey-auth-xxx 或 tskey-client-xxx
# 若使用 ephemeral 节点，可在末尾加 ?ephemeral=true
# TS_AUTHKEY=

# ─────────────── OAuth / Workload Identity 相关（三选一组合使用，不能混用） ───────────────

# OAuth Client ID
# 可单独使用（某些环境自动生成 token），或搭配 TS_CLIENT_SECRET / TS_ID_TOKEN / TS_AUDIENCE
# 支持 file:/path/to/file 读取文件内容
# TS_CLIENT_ID=

# OAuth Client Secret（必须搭配 TS_CLIENT_ID 使用）
# 支持 file: 前缀
# 不能与 TS_ID_TOKEN 或 TS_AUDIENCE 共用
# TS_CLIENT_SECRET=

# Workload Identity Federation 的 ID Token（必须搭配 TS_CLIENT_ID）
# 支持 file: 前缀
# 不能与 TS_CLIENT_SECRET 或 TS_AUDIENCE 共用
# TS_ID_TOKEN=

# 用于自动请求 ID Token 的 Audience（GitHub Actions、GCP、AWS 等支持自动生成 token 的环境）
# 必须搭配 TS_CLIENT_ID 使用
# 不能与 TS_CLIENT_SECRET 或 TS_ID_TOKEN 共用
# TS_AUDIENCE=

# ─────────────── 网络/代理/路由相关 ───────────────

# 将所有 Tailscale 入站流量代理到指定内网 IP
# TS_DEST_IP=

# SOCKS5 代理监听地址（传给 tailscaled --socks5-server=）
# 例如 :1055 表示监听所有接口 1055 端口
# TS_SOCKS5_SERVER=

# HTTP 代理监听地址（传给 tailscaled --outbound-http-proxy-listen=）
# 例如 :8080
# TS_OUTBOUND_HTTP_PROXY_LISTEN=

# 要广告的子网路由（相当于 tailscale set --advertise-routes=）
# 多个用逗号分隔，例如 192.168.50.0/24,10.0.0.0/16
# TS_ROUTES=

# ─────────────── 主机名 / 状态存储 ───────────────

# 指定 Tailscale 节点在 tailnet 中的主机名
# 相当于 tailscale set --hostname=
# TS_HOSTNAME=

# tailscaled 状态存储目录（需持久化）
# Docker 环境下通常挂载 volume 到此路径
# 默认值（非 k8s）：/var/lib/tailscale
TS_STATE_DIR=/var/lib/tailscale

# Kubernetes 专用：存储 Tailscale 状态的 Secret 名称
# 若未设置 TS_AUTHKEY，且此 Secret 中有 authkey 字段，则自动使用
# 默认值：tailscale
# TS_KUBE_SECRET=tailscale

# ─────────────── 用户态网络栈（默认开启） ───────────────

# 是否启用 userspace-networking 模式（无内核 tun 支持）
# Docker 镜像默认 true
TS_USERSPACE=false

# ─────────────── 健康检查 / Metrics（1.78+ 版本支持） ───────────────

# 启用 /healthz 端点（未认证）
# 返回 200（有 tailnet IP）或 503
# TS_ENABLE_HEALTH_CHECK=false

# 启用 /metrics 端点（未认证）
# TS_ENABLE_METRICS=false

# 健康检查 / metrics 监听地址（1.78+）
# 默认监听所有接口 9002 端口
# TS_LOCAL_ADDR_PORT=[::]:9002

# ─────────────── Serve / Funnel 配置 ───────────────

# Serve 和 Funnel 的 JSON 配置文件路径
# 建议挂载为**目录**而非单个文件，以便动态更新
# TS_SERVE_CONFIG=

# ─────────────── 其他高级参数 ───────────────

# 传递给 tailscale up 命令的额外参数
# 常用：--advertise-tags=tag:xxx、--accept-routes、--advertise-exit-node 等
# TS_EXTRA_ARGS=
# 自定义服务器地址（例如 headscale）
# 传递给 tailscale up 的 --login-server 参数
# 例如 https://myheadscale.example.com
# TS_EXTRA_ARGS=--login-server=https://myheadscale.example.com --accept-routes
# TS_EXTRA_ARGS=--derpmap=https://derp.yourdomain.com/derp

# 传递给 tailscaled 命令的额外参数
# TS_TAILSCALED_EXTRA_ARGS=

# Tailscale LocalAPI Unix socket 路径
# 默认值：/var/run/tailscale/tailscaled.sock
TS_SOCKET=/var/run/tailscale/tailscaled.sock
