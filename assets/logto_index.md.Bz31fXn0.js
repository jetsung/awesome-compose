import{_ as i,o as a,c as t,aj as e}from"./chunks/framework.DpVzuYkC.js";const d=JSON.parse('{"title":"Logto","description":"","frontmatter":{},"headers":[],"relativePath":"logto/index.md","filePath":"logto/README.md"}'),l={name:"logto/index.md"};function h(r,s,n,o,k,p){return a(),t("div",null,[...s[0]||(s[0]=[e(`<h1 id="logto" tabindex="-1">Logto <a class="header-anchor" href="#logto" aria-label="Permalink to “Logto”">​</a></h1><p><a href="https://logto.io/" target="_blank" rel="noreferrer">Office Web</a> - <a href="https://github.com/logto-io/logto" target="_blank" rel="noreferrer">Source</a> - <a href="https://hub.docker.com/r/svhd/logto" target="_blank" rel="noreferrer">Docker Image</a> - <a href="https://docs.logto.io/logto-oss/get-started-with-oss" target="_blank" rel="noreferrer">Document</a></p><hr><blockquote><p><a href="https://logto.io/" target="_blank" rel="noreferrer">Logto</a> 是现代开源的 SaaS 和 AI 应用认证基础设施。</p></blockquote><hr><h2 id="配置" tabindex="-1">配置 <a class="header-anchor" href="#配置" aria-label="Permalink to “配置”">​</a></h2><ol><li>更新密钥</li></ol><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 用于加密 Secret Vault 中数据加密密钥 (DEK) 的密钥加密密钥 (KEK)。Secret Vault 正常工作必须配置。必须为 base64 编码字符串。推荐使用 AES-256（32 字节）。示例：crypto.randomBytes(32).toString(&#39;base64&#39;)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SECRET_VAULT_KEK</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span></span></code></pre></div><p>命令行</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;s#^SECRET_VAULT_KEK=.*#SECRET_VAULT_KEK=$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rand </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">-base64</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 36</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> tr</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;\\n&#39;)#g&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .env</span></span></code></pre></div><ol start="2"><li>配置 <a href="https://www.postgresql.org/docs/14/libpq-connect.html#id-1.7.3.8.3.6" target="_blank" rel="noreferrer">PostgreSQL</a> 数据库</li></ol><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DB_URL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">postgres://postgres:p0stgr3s@postgres:5432/logto</span></span></code></pre></div><ol start="3"><li>配置 <code>TRUST_PROXY_HEADER</code> 值为 1</li></ol><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">TRUST_PROXY_HEADER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1</span></span></code></pre></div><p><strong>注意：</strong> 若未启用外部域名，请注释下述两行</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ENDPOINT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;protocol://localhost:3001&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ADMIN_ENDPOINT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;protocol://localhost:3002&#39;</span></span></code></pre></div><p><a href="https://docs.logto.io/zh-CN/concepts/core-service/configuration" target="_blank" rel="noreferrer"><strong>更多配置</strong></a></p>`,17)])])}const c=i(l,[["render",h]]);export{d as __pageData,c as default};
